---
layout: default
title:  "11: Computer Programming"
permalink: /11/
---

# 11: Computer Programming

### Assignment

Document progress on a final project.

### Fixing the Valve Leak

<img src="rejoice.jpg" alt="thank_god">

Rob and Nathan were merciful on us and allowed us to work on our final projects instead of giving us an additional computer programming assignment on top of our final project.

One of the problems I ran into when testing my [elbow configuring](https://kem406.github.io/PHYS-S12/09/) was that the solenoid valve I used was not strong enough to withhold all of the air pressure coming from the tank. As a result, a little bit of air leaked through when no buttons were pressed, causing the arm to slowly rise without a given command to rise.

To fix this, I will have a "master solenoid valve," on top of the solenoid valves for each joint of the robot, and I will create an Arduino program that will only open the master valve when one of the joint valves is opened (i.e. when I want the robot to move). I tested two solenoid valves in series, and found that two of them are sufficient at withholding the air pressure from the tank.

The program is as follows:   

```
// The purpose of this program is to activate valve 5
// when any combination of the first four valves are activated

// unchanging constants
const int valveOne = 2;
const int valveTwo = 3;
const int valveThree = 4;
const int valveFour = 5;
const int valveFive = 6;

// variables
int valveOneState = 0;
int valveTwoState = 0;
int valveThreeState = 0;
int valveFourState = 0;

void setup() {

  // initialize valves 1-4 as inputs:
  pinMode(valveOne, INPUT);
  pinMode(valveTwo, INPUT);
  pinMode(valveThree, INPUT);
  pinMode(valveFour, INPUT);

  // initialize valve 5 as an output:
  pinMode(valveFive, OUTPUT);

}

void loop() {

  // find the state of valves 1-4:
  valveOneState = digitalRead(valveOne);
  valveTwoState = digitalRead(valveTwo);
  valveThreeState = digitalRead(valveThree);
  valveFourState = digitalRead(valveFour);

  // check to see which button is pressed. If both pressed, give warning signal
  if (valveOneState == LOW && valveTwoState == LOW && valveThreeState == LOW && valveFourState == LOW) {

    digitalWrite(valveFive, LOW);

  } else { // if ANY of valves 1-4 are activated, activate valve 5

    digitalWrite(valveFive, HIGH);

  }

}
```

Image from [here](https://reformjudaism.org/blog/2018/11/21/sing-hallelujah-poem-thanksgiving).
